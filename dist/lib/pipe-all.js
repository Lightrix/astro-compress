import s from"./parse.js";import f from"./sharp-read.js";import{minify as p}from"csso";import{minify as c}from"html-minifier-terser";import m from"sharp";import{optimize as n}from"svgo";import{minify as h}from"terser";var $=async(r,e=2)=>{for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)){const o=r[i];if(!o)continue;switch(i){case"css":await s(`${r.path}**/*.css`,e,i,a=>p(a,o).css);break;case"html":await s(`${r.path}**/*.html`,e,i,async a=>await c(a,o));break;case"js":await s(`${r.path}**/*.{js,mjs,cjs}`,e,i,async a=>(await h(a,o)).code);break;case"img":await s(`${r.path}**/*.{avci,avcs,avif,avifs,gif,heic,heics,heif,heifs,jfif,jif,jpe,jpeg,jpg,png,raw,tiff,webp}`,e,i,async a=>await f(a,o),async a=>m(a));break;case"svg":await s(`${r.path}**/*.svg`,e,i,async a=>{const t=n(a,o);if(typeof t.error<"u")console.log(t.error);else return t.data});break;default:break}}};export{$ as default};

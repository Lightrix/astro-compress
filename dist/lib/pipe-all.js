import{minify as p}from"csso";import{minify as c}from"html-minifier-terser";import s from"sharp";import{optimize as m}from"svgo";import{minify as n}from"terser";import f from"./parse.js";import h from"./sharp-read.js";var b=async(a,o=2)=>{for(const i in a)if(Object.prototype.hasOwnProperty.call(a,i)){const e=a[i];if(!e)continue;switch(i){case"css":{await f(`${a.path}**/*.css`,o,i,a?.filter,r=>p(r,e).css);break}case"html":{await f(`${a.path}**/*.html`,o,i,a?.filter,async r=>await c(r,e));break}case"js":{await f(`${a.path}**/*.{js,mjs,cjs}`,o,i,a?.filter,async r=>(await n(r,e)).code);break}case"img":{await f(`${a.path}**/*.{avci,avcs,avif,avifs,gif,heic,heics,heif,heifs,jfif,jif,jpe,jpeg,jpg,png,raw,tiff,webp}`,o,i,a?.filter,async r=>await h(r,e),async r=>s(r));break}case"svg":{await f(`${a.path}**/*.svg`,o,i,a?.filter,async r=>{const t=m(r,e);if(typeof t.error<"u"&&console.log(t.error),typeof t.data<"u")return t.data});break}default:break}}};export{b as default};

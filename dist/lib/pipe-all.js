import{minify as t}from"csso";import{minify as m}from"html-minifier-terser";import n from"sharp";import{optimize as p}from"svgo";import{minify as l}from"terser";import c from"./parse.js";import y from"./sharp-read.js";var x=async(s,e,o=2)=>{for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const r=e[i];if(!r)continue;switch(i){case"css":{await c(`${s}**/*.css`,o,i,e?.exclude,a=>t(a,r).css);break}case"html":{await c(`${s}**/*.html`,o,i,e?.exclude,async a=>await m(a,r));break}case"js":{await c(`${s}**/*.{js,mjs,cjs}`,o,i,e?.exclude,async a=>(await l(a,r)).code);break}case"img":{await c(`${s}**/*.{avci,avcs,avif,avifs,gif,heic,heics,heif,heifs,jfif,jif,jpe,jpeg,jpg,png,raw,tiff,webp}`,o,i,e?.exclude,async a=>await y(a,r),async a=>n(a));break}case"svg":{await c(`${s}**/*.svg`,o,i,e?.exclude,async a=>{const f=p(a,r);if(typeof f.error<"u"&&console.log(f.error),typeof f.data<"u")return f.data});break}default:break}}};export{x as default};

import{minify as p}from"csso";import{minify as s}from"html-minifier-terser";import t from"sharp";import{optimize as m}from"svgo";import{minify as n}from"terser";import c from"./parse.js";import h from"./sharp-read.js";var v=async(a,o=2)=>{for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e)){const i=a[e];if(!i)continue;switch(e){case"css":{await c(`${a.path}**/*.css`,o,e,a?.exclude,r=>p(r,i).css);break}case"html":{await c(`${a.path}**/*.html`,o,e,a?.exclude,async r=>await s(r,i));break}case"js":{await c(`${a.path}**/*.{js,mjs,cjs}`,o,e,a?.exclude,async r=>(await n(r,i)).code);break}case"img":{await c(`${a.path}**/*.{avci,avcs,avif,avifs,gif,heic,heics,heif,heifs,jfif,jif,jpe,jpeg,jpg,png,raw,tiff,webp}`,o,e,a?.exclude,async r=>await h(r,i),async r=>t(r));break}case"svg":{await c(`${a.path}**/*.svg`,o,e,a?.exclude,async r=>{const f=m(r,i);if(typeof f.error<"u"&&console.log(f.error),typeof f.data<"u")return f.data});break}default:break}}};export{v as default};
